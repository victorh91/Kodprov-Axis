{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\victo\\\\OneDrive\\\\Dokument\\\\IT projekt\\\\Kodprover\\\\Kodprov Axis\\\\src\\\\Components\\\\Auth\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { Route, Redirect, useHistory } from 'react-router-dom';\nimport { useAppContext } from \"../../Libs/contextLib\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useAppContext = useAppContext(),\n      userHasAuthenticated = _useAppContext.userHasAuthenticated;\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      show = _useState6[0],\n      setShow = _useState6[1];\n\n  var history = useHistory();\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0;\n  }\n\n  function AlertDismissible() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        show: show,\n        variant: \"success\",\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: \"How's it going?!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Cras mattis consectetur purus sit amet fermentum.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: function onClick() {\n              return setShow(false);\n            },\n            variant: \"outline-success\",\n            children: \"Close me y'all!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this), !show && /*#__PURE__*/_jsxDEV(Button, {\n        onClick: function onClick() {\n          return setShow(true);\n        },\n        children: \"Show Alert\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true);\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              storeAndUpdate();\n              history.push(\"/\");\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  var storeAndUpdate = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var uri, res, posts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              uri = 'http://localhost:3000/users';\n              _context.next = 3;\n              return fetch(uri);\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              posts = _context.sent;\n              console.log(username, password);\n              posts.map(function (credentials) {\n                if (credentials.username === username && credentials.password === password) {\n                  // Store\n                  localStorage.username = username;\n                  localStorage.password = password;\n                  userHasAuthenticated(true);\n                } else {}\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function storeAndUpdate() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"username\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          autoFocus: true,\n          type: \"username\",\n          value: username,\n          onChange: function onChange(e) {\n            return setUsername(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          value: password,\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        block: true,\n        size: \"lg\",\n        action: \"/\",\n        type: \"submit\",\n        disabled: !validateForm(),\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"4T/+xn2P5SiZgNpBgwkRWbkcE8k=\", false, function () {\n  return [useAppContext, useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/src/Components/Auth/login.js"],"names":["React","useState","Form","Button","Route","Redirect","useHistory","useAppContext","Login","username","setUsername","password","setPassword","userHasAuthenticated","show","setShow","history","validateForm","length","AlertDismissible","handleSubmit","event","preventDefault","storeAndUpdate","push","uri","fetch","res","json","posts","console","log","map","credentials","localStorage","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { Route, Redirect ,useHistory } from 'react-router-dom'\r\nimport { useAppContext } from \"../../Libs/contextLib\";\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const { userHasAuthenticated } = useAppContext();\r\n  const [show, setShow] = useState(true);\r\n  const history = useHistory();\r\n\r\n  function validateForm() {\r\n    return username.length > 0 && password.length > 0;\r\n  }\r\n  function AlertDismissible() {\r\n    return (\r\n      <>\r\n        <Alert show={show} variant=\"success\">\r\n          <Alert.Heading>How's it going?!</Alert.Heading>\r\n          <p>\r\n            Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget\r\n            lacinia odio sem nec elit. Cras mattis consectetur purus sit amet\r\n            fermentum.\r\n          </p>\r\n          <hr />\r\n          <div className=\"d-flex justify-content-end\">\r\n            <Button onClick={() => setShow(false)} variant=\"outline-success\">\r\n              Close me y'all!\r\n            </Button>\r\n          </div>\r\n        </Alert>\r\n  \r\n        {!show && <Button onClick={() => setShow(true)}>Show Alert</Button>}\r\n      </>\r\n    );\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    storeAndUpdate();\r\n    history.push(\"/\");\r\n  }\r\n  const storeAndUpdate = async () => {\r\n    let uri = 'http://localhost:3000/users';\r\n    const res = await fetch(uri);\r\n    const posts = await res.json();\r\n    console.log(username, password)\r\n    posts.map(credentials =>  {\r\n      if(credentials.username === username && credentials.password === password) {\r\n        // Store\r\n        localStorage.username = username;\r\n        localStorage.password = password;\r\n        userHasAuthenticated(true);\r\n      }\r\n      else {\r\n            \r\n      }\r\n    })}\r\n  return (\r\n    <div className=\"Login\">\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group size=\"lg\" controlId=\"username\">\r\n          <Form.Label>Username</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Button block size=\"lg\"  action='/' type=\"submit\" disabled={!validateForm()}>\r\n          Login\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}