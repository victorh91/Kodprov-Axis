{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\victo\\\\OneDrive\\\\Dokument\\\\IT projekt\\\\Kodprover\\\\Kodprov Axis\\\\src\\\\Components\\\\Auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { useAppContext } from \"../../Libs/contextLib\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useAppContext = useAppContext(),\n      userHasAuthenticated = _useAppContext.userHasAuthenticated;\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0;\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              storeAndUpdate();\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  var storeAndUpdate = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var uri, res, posts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              uri = 'http://localhost:3000/users';\n              _context.next = 3;\n              return fetch(uri);\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              posts = _context.sent;\n              console.log(username, password);\n              posts.map(function (credentials) {\n                if (credentials.username === username && credentials.password === password) {\n                  // Store\n                  localStorage.username = username;\n                  localStorage.password = password;\n                  userHasAuthenticated(true);\n                }\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function storeAndUpdate() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"username\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          autoFocus: true,\n          type: \"username\",\n          value: username,\n          onChange: function onChange(e) {\n            return setUsername(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        size: \"lg\",\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          value: password,\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        block: true,\n        size: \"lg\",\n        type: \"submit\",\n        disabled: !validateForm(),\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"dt2BZFWWV9Kg3cnQR4ZqCfGLeKI=\", false, function () {\n  return [useAppContext];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/victo/OneDrive/Dokument/IT projekt/Kodprover/Kodprov Axis/src/Components/Auth/Login.js"],"names":["React","useState","Form","Button","useAppContext","Login","username","setUsername","password","setPassword","userHasAuthenticated","validateForm","length","handleSubmit","event","preventDefault","storeAndUpdate","uri","fetch","res","json","posts","console","log","map","credentials","localStorage","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { useAppContext } from \"../../Libs/contextLib\";\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const { userHasAuthenticated } = useAppContext();\r\n\r\n  function validateForm() {\r\n    return username.length > 0 && password.length > 0;\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    storeAndUpdate();\r\n  }\r\n\r\n  const storeAndUpdate = async () => {\r\n    let uri = 'http://localhost:3000/users';\r\n    const res = await fetch(uri);\r\n    const posts = await res.json();\r\n    console.log(username, password)\r\n    posts.map(credentials =>  {\r\n      if(credentials.username === username && credentials.password === password) {\r\n\r\n        // Store\r\n        localStorage.username = username;\r\n        localStorage.password = password;\r\n\r\n        userHasAuthenticated(true);\r\n      }\r\n    })}\r\n  return (\r\n    <div className=\"Login\">\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group size=\"lg\" controlId=\"username\">\r\n          <Form.Label>Username</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Button block size=\"lg\" type=\"submit\" disabled={!validateForm()}>\r\n          Login\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}